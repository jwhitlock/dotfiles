{{- if eq .chezmoi.os "darwin" -}}
#!/bin/bash
set -e
brew uninstall --cask $1 || echo "👍 $1 not brew installed"
brew bundle --no-lock --file=/dev/stdin <<EOF
function uninstall {
  brew uninstall $1 || echo "👍 $1 not brew installed"
}
function uninstall_cask {
  brew uninstall --cask $1 || echo "👍 $1 not brew installed"
}

#
# Taps
#
tap "homebrew/bundle"
tap "homebrew/services"

{{- if .forMozilla }}
tap "heroku/brew"
{{- end }}

uninstall macvim
uninstall terraform

#
# Brews
#
brew "ack"
brew "black"
brew "chezmoi"
brew "csvkit"
brew "dhex"
brew "dos2unix"
brew "ffmpeg"
brew "fish"
brew "gh"
brew "gnupg"
brew "hub"
brew "jq"
brew "jupyterlab"
brew "magic-wormhole"
brew "ollama"
brew "perl"  # For ack
brew "pinentry-mac"
brew "pyenv"
brew "pyenv-virtualenv"
brew "python3"
brew "rust"
brew "shellcheck"
brew "starship"
brew "tfenv"
brew "typos-cli"
brew "uv"
brew "virtualfish"
brew "wget"
brew "yq"

# Neovim
brew "neovim"
brew "composer"
brew "fd"
brew "julia"
brew "luarocks"
brew "openjdk"
brew "ripgrep"

{{- if .forMozilla }}
# fx-private-relay, monitor
brew "circleci"
brew "heroku/brew/heroku"
brew "nvm"
brew "optipng"
brew "postgresql@14"
brew "redis"
brew "structurizr-cli"
brew "telnet"
brew "volta"

# sre
brew "age"
brew "helm"
brew "go"
brew "kubernetes-cli"
{{- end }}

{{- if .forPersonal }}
{{- end }}

{{- if (or .forPersonal .forMozilla ) }}
brew "awscli"
brew "graphviz"
{{- end }}

#
# Casks
#
cask "1password"
cask "1password-cli"
cask "docker"
cask "firefox"
cask "keybase"
cask "marked"
cask "omnifocus"
cask "rescuetime"
cask "shiftit"
cask "slack"
cask "sourcetree"
cask "textexpander"
cask "vimr"
cask "font-meslo-lg-nerd-font"  # MesloLGS Nerd Font Propo

{{- if .forMozilla }}
cask "element"
cask "google-chrome"
cask "reflector"
cask "zoom"
{{- end }}

{{- if .forPersonal }}
cask "minecraft"
cask "origin"
cask "steam"
cask "superduper"
cask "synology-drive"
{{- end }}

{{- if .forFamilyComputer }}
cask "audacity"
cask "epic-games"
cask "handbrake"
cask "makemkv"
cask "metaz"
cask "ubiquiti-unifi-controller"
cask "vlc"
{{- end }}
EOF
{{ end -}}
